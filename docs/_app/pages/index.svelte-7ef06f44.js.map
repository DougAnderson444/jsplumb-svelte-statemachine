{"version":3,"file":"index.svelte-7ef06f44.js","sources":["../../../../../src/lib/util.js","../../../../../src/lib/Box.svelte","../../../../../src/lib/App.svelte"],"sourcesContent":["const key = Symbol();\r\n\r\nexport { key };\r\n","<script>\r\n\timport './app.css';\r\n\r\n\timport { key } from './util';\r\n\timport { getContext } from 'svelte';\r\n\r\n\texport let action;\r\n\texport let left;\r\n\texport let top;\r\n\texport let box = null;\r\n\r\n\tlet ep;\r\n\r\n\tconst context = getContext(key);\r\n\tconst instance = context.getInstance();\r\n\r\n\t$: if (box) instance.manage(box);\r\n\r\n\tinstance.addSourceSelector('.ep', {\r\n\t\tedgeType: 'basic',\r\n\t\textract: {\r\n\t\t\taction: 'the-action'\r\n\t\t},\r\n\t\tmaxConnections: 2,\r\n\t\tonMaxConnections: function (info, e) {\r\n\t\t\talert('Maximum connections (' + info.maxConnections + ') reached');\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<div bind:this={box} class=\"w\" style=\"left: {left}px; top: {top}px;\">\r\n\t<slot>No Name</slot>\r\n\t<div bind:this={ep} class=\"ep\" {action} />\r\n</div>\r\n\r\n<style>\r\n\t.w {\r\n\t\tpadding: 16px;\r\n\t\tposition: absolute;\r\n\t\tz-index: 4;\r\n\t\tborder: 1px solid #2e6f9a;\r\n\t\tbox-shadow: 2px 2px 19px #e0e0e0;\r\n\t\t-o-box-shadow: 2px 2px 19px #e0e0e0;\r\n\t\t-webkit-box-shadow: 2px 2px 19px #e0e0e0;\r\n\t\t-moz-box-shadow: 2px 2px 19px #e0e0e0;\r\n\t\t-moz-border-radius: 8px;\r\n\t\tborder-radius: 8px;\r\n\t\topacity: 0.8;\r\n\t\tcursor: move;\r\n\t\tbackground-color: white;\r\n\t\tfont-size: 11px;\r\n\t\t-webkit-transition: background-color 0.25s ease-in;\r\n\t\t-moz-transition: background-color 0.25s ease-in;\r\n\t\ttransition: background-color 0.25s ease-in;\r\n\t}\r\n\r\n\t.w:hover {\r\n\t\tbackground-color: #5c96bc;\r\n\t\tcolor: white;\r\n\t}\r\n\r\n\t.ep {\r\n\t\tposition: absolute;\r\n\t\tbottom: 37%;\r\n\t\tright: 5px;\r\n\t\twidth: 1em;\r\n\t\theight: 1em;\r\n\t\tbackground-color: orange;\r\n\t\tcursor: pointer;\r\n\t\tbox-shadow: 0 0 2px black;\r\n\t\t-webkit-transition: -webkit-box-shadow 0.25s ease-in;\r\n\t\t-moz-transition: -moz-box-shadow 0.25s ease-in;\r\n\t\ttransition: box-shadow 0.25s ease-in;\r\n\t}\r\n\r\n\t.ep:hover {\r\n\t\tbox-shadow: 0 0 6px black;\r\n\t}\r\n</style>\r\n","<script>\r\n\timport './app.css';\r\n\timport { onMount, setContext } from 'svelte';\r\n\timport Box from './Box.svelte';\r\n\timport { key } from './util';\r\n\r\n\tlet canvas;\r\n\tlet instance;\r\n\tlet opened, begin, phone1, phone2, inperson, rejected;\r\n\tlet offsetHeight, offsetWidth;\r\n\r\n\tconst getInstance = () => instance;\r\n\r\n\tsetContext(key, {\r\n\t\tgetInstance: () => instance\r\n\t});\r\n\r\n\tlet boxes;\r\n\t$: if (offsetHeight)\r\n\t\tboxes = [\r\n\t\t\t{\r\n\t\t\t\tname: 'opened',\r\n\t\t\t\tleft: offsetHeight / 6,\r\n\t\t\t\ttop: offsetHeight / 5,\r\n\t\t\t\taction: 'begin',\r\n\t\t\t\ttitle: 'BEGIN'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'phone1',\r\n\t\t\t\tleft: offsetHeight / 5,\r\n\t\t\t\ttop: offsetHeight / 4,\r\n\t\t\t\taction: 'begin',\r\n\t\t\t\ttitle: 'PHONE INTERVIEW 1'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'phone2',\r\n\t\t\t\tleft: offsetHeight / 4,\r\n\t\t\t\ttop: offsetHeight / 3,\r\n\t\t\t\taction: 'begin',\r\n\t\t\t\ttitle: 'PHONE INTERVIEW 2'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'inperson',\r\n\t\t\t\tleft: offsetHeight / 3,\r\n\t\t\t\ttop: offsetHeight / 2,\r\n\t\t\t\taction: 'begin',\r\n\t\t\t\ttitle: 'IN PERSON'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'rejected',\r\n\t\t\t\tleft: offsetHeight / 2,\r\n\t\t\t\ttop: offsetHeight / 4,\r\n\t\t\t\taction: 'begin',\r\n\t\t\t\ttitle: 'REJECTED'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t// <Box bind:box={phone1} left={35} top={12} action={'phone1'}>PHONE INTERVIEW 1</Box>\r\n\t// <Box bind:box={phone2} left={28} top={24} action={'phone2'}>PHONE INTERVIEW 2</Box>\r\n\t// <Box bind:box={inperson} left={12} top={23} action={'inperson'}>IN PERSON</Box>\r\n\t// <Box bind:box={rejected} left={10} top={35} action={'rejected'}>REJECTED</Box>\r\n\r\n\tonMount(async () => {\r\n\t\tconst { newInstance } = await import('@jsplumb/browser-ui');\r\n\t\tconst { BezierConnector } = await import('@jsplumb/connector-bezier');\r\n\t\tconst { uuid } = await import('@jsplumb/util');\r\n\r\n\t\t// setup some defaults for jsPlumb.\r\n\t\tinstance = newInstance({\r\n\t\t\tendpoint: { type: 'Dot', options: { radius: 2 } },\r\n\t\t\tconnectionOverlays: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'Arrow',\r\n\t\t\t\t\toptions: {\r\n\t\t\t\t\t\tlocation: 0.8,\r\n\t\t\t\t\t\tid: 'arrow',\r\n\t\t\t\t\t\tlength: 16,\r\n\t\t\t\t\t\tfoldback: 0.8\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{ type: 'Label', options: { label: 'Connect!', id: 'label', cssClass: 'aLabel' } }\r\n\t\t\t],\r\n\t\t\tcontainer: canvas\r\n\t\t});\r\n\r\n\t\tinstance.registerConnectionType('basic', {\r\n\t\t\tanchor: 'Continuous',\r\n\t\t\tconnector: 'StateMachine',\r\n\t\t\tpaintStyle: {\r\n\t\t\t\tstroke: '#5c96bc',\r\n\t\t\t\tstrokeWidth: 2,\r\n\t\t\t\toutlineStroke: 'transparent',\r\n\t\t\t\toutlineWidth: 4\r\n\t\t\t},\r\n\t\t\thoverPaintStyle: { stroke: '#1e8151', strokeWidth: 2 }\r\n\t\t});\r\n\r\n\t\tvar windows = document.querySelectorAll('.statemachine-demo .w');\r\n\r\n\t\t// bind a click listener to each connection; the connection is deleted\r\n\t\tinstance.bind('click', function (c) {\r\n\t\t\tinstance.deleteConnection(c);\r\n\t\t});\r\n\r\n\t\t// bind a connection listener. note that the parameter passed to this function contains more than\r\n\t\t// just the new connection - see the documentation for a full list of what is included in 'info'.\r\n\t\t// this listener sets the connection's internal\r\n\t\t// id as the label overlay's text.\r\n\t\tinstance.bind('connection', function (info) {\r\n\t\t\tinfo.connection.getOverlay('label').setLabel(info.connection.id);\r\n\t\t});\r\n\r\n\t\t// bind a double click listener to \"canvas\"; add new node when this occurs.\r\n\t\tinstance.on(canvas, 'dblclick', function (e) {\r\n\t\t\tnewNode(e.offsetX, e.offsetY);\r\n\t\t});\r\n\r\n\t\tfunction newNode(x, y) {\r\n\t\t\tboxes = [...boxes, { name: uuid(), left: x, top: y, action: '', title: uuid() }];\r\n\t\t}\r\n\r\n\t\tinstance.addTargetSelector('.w', {\r\n\t\t\tanchor: 'Continuous',\r\n\t\t\tallowLoopback: true\r\n\t\t});\r\n\r\n\t\t// suspend drawing and initialise.\r\n\t\tinstance.batch(function () {\r\n\t\t\t// register all windows with the instance\r\n\t\t\tinstance.manageAll(windows);\r\n\r\n\t\t\t// make a few connections\r\n\t\t\tinstance.connect({\r\n\t\t\t\tsource: opened,\r\n\t\t\t\ttarget: phone1,\r\n\t\t\t\ttype: 'basic'\r\n\t\t\t});\r\n\t\t\tinstance.connect({\r\n\t\t\t\tsource: phone1,\r\n\t\t\t\ttarget: phone1,\r\n\t\t\t\ttype: 'basic'\r\n\t\t\t});\r\n\t\t\tinstance.connect({\r\n\t\t\t\tsource: phone1,\r\n\t\t\t\ttarget: inperson,\r\n\t\t\t\ttype: 'basic'\r\n\t\t\t});\r\n\r\n\t\t\tinstance.connect({\r\n\t\t\t\tsource: phone2,\r\n\t\t\t\ttarget: rejected,\r\n\t\t\t\ttype: 'basic'\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n</script>\r\n\r\n<section class=\"jtk-demo-main demo\">\r\n\t<!-- demo -->\r\n\t<div\r\n\t\tclass=\"jtk-demo-canvas canvas-wide statemachine-demo jtk-surface jtk-surface-nopan canvas\"\r\n\t\tid=\"canvas\"\r\n\t\tbind:this={canvas}\r\n\t\tbind:offsetHeight\r\n\t\tbind:offsetWidth\r\n\t>\r\n\t\t{#if instance && boxes.length}\r\n\t\t\t{#each boxes as box}\r\n\t\t\t\t<svelte:component\r\n\t\t\t\t\tthis={Box}\r\n\t\t\t\t\tbind:box={boxes[box.name]}\r\n\t\t\t\t\tleft={box.left}\r\n\t\t\t\t\ttop={box.top}\r\n\t\t\t\t\taction={box.action}>{box.title}</svelte:component\r\n\t\t\t\t>\r\n\t\t\t{/each}\r\n\t\t{/if}\r\n\t</div>\r\n\t<!-- /demo -->\r\n\t<!-- explanation -->\r\n\t<div class=\"description\">\r\n\t\t<h4>STATE MACHINE</h4>\r\n\t\t<p>Nodes are connected with the StateMachine connector.</p>\r\n\t\t<p>\r\n\t\t\tEndpoints are located with 'Continuous' anchors, which are anchors whose location is\r\n\t\t\tcalculated based on the location of all other connected elements, and which guarantee a unique\r\n\t\t\tendpoint per connection.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tClick and drag new Connections from the orange div in each element; the main elements in the\r\n\t\t\tUI are configured to be Connection targets. You can drag from one of these divs onto its\r\n\t\t\tparent element to create a 'loopback' connection. Each element supports up to 5 Connections.\r\n\t\t</p>\r\n\t\t<p>Click on a Connection to delete it.</p>\r\n\t\t<p>Double click on whitespace to add a new node</p>\r\n\t</div>\r\n\t<!-- /explanation -->\r\n</section>\r\n\r\n<style>\r\n\t.demo {\r\n\t\t/* for IE10+ touch devices */\r\n\t\ttouch-action: none;\r\n\t}\r\n\r\n\t#canvas {\r\n\t\twidth: 100vw;\r\n\t\theight: 50vh;\r\n\t}\r\n</style>\r\n"],"names":[],"mappings":"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"}